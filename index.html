<!doctype html>

<html lang="en">
	<head>
		<meta charset="utf-8">

		<title>Olisto SDK Example</title>
		<meta name="description" content="An example for the Olisto SDK">
		<meta name="author" content="SitePoint">

		<script src="lib/olisto-sdk.js"></script>
	</head>

	<body>

	</body>

	<script type="module">
		const partnerKey = '7ze1d587238s7524f73k3333';
		const appId = 'test.app.id';
		const userId = 'userId0981238763425';
		const channelId = 'eneco-toon';

		const bundleToInstantiate = {
			bundleId: '5dfb9f675f4cf381a8f4bf9c',
			name: 'test_SDK',
			wizardOutput:
				[
					[
						'5c541927962d7b5cb63ee598',
						{
							endpoint: 'geofencing.5c545fe2468bc962fc28aacc',
							_id: '5c545fe2468bc962fc28aacc',
						},
					],
					[
						[
							{
								endpoint: 'tplink.80121B61A8C743DBFB6142DE6D1B926B1B6763E5',
								_id: '5d6ce03e5596f54f5a6391ec',
							},
						],
					],
				],
		};

		const api = olisto.OlistoApi.init(partnerKey, appId, userId);

		api._getUserContext(userId, () => {
			api.getBundlesTemplate().then(data => {
				console.log(data);
				console.log('-----------------');
			});

			api.instantiateBundle(bundleToInstantiate).then(data => {
				console.log(data);
			});
		});

		function handleError(error) {
			console.log(error.toString());
			console.log(JSON.stringify(error));
		}
	</script>
</html>
